Not a Real Async DB
====================

This is a fork of notarealdb -- which stores data in local JSON files, for testing and sample applications.

This fork adds optional callbacks to most of the retrieval operations, so that code which has been prototyped or built using notarealdb & JSON files can be easily upgraded to a 'real' database which might use asynchronous Promises & callbacks.

The database engine I'm targeting is MySQL but it should be near-compatible with other SQL-engines e.g. Postgres, SQLite.

For more information see the usage of notarealdb. This is intended as a drop-in replacement for notarealdb, which allows its callers to pass in write code in an asynchronous-oriented style rather than 

_Note on generated IDs:_ Because notarealdb generates alphanumeric IDs, those have been left in place, meaning that a future database would need to use those alphanumeric IDs, not their own auto-generated e.g. integers.

## Usage

Create a `DataStore` instance specifying in which folder to store the data, then create a collections for each object type you want to store:

```js
const { DataStore } = require('notarealdb');

const store = new DataStore('./data');
const apples = store.collection('apples');
const oranges = store.collection('oranges');
```

This will save apples in `./data/apples.json` and oranges in `./data/oranges.json`.

You can then manipulate each collection using the following CRUD operations:

```js
// create a new item; returns a generated id. pass an action to be used post-creation
const id = apples.create({variety: 'Gala', weight: 133},
              newRecord => console.info(`Created a new record ${newRecord}`)); // => 'BJ4E9mQOG'

/* Note that create() is unusual in that it still returns an ID synchronously. This is because in notarealdb the 
   IDs are generated in code prior to saving, rather than being generated by the underlying database engine itself.

   This package behaves the same, meaning that the create() call can in fact also return the ID of the new record OK,
   as well as running any additional callback function provided.
*/

// list all items in a collection
apples.list(allApples => console.table(allApples));

// get a single item
apples.get('BJ4E9mQOG', apple => console.info(apple));

// update an item
apples.update({id: 'BJ4E9mQOG', variety: 'Braeburn', weight: 133},
  apple => console.info(`Updated apple ${apple.id}`));

// delete an item
apples.delete('BJ4E9mQOG', id => console.info(`Apple ${id} deleted`))
```

